<html>
    <head>
        <title>Helper -> ToC</title>
        <script src="https://cdn.tailwindcss.com"></script>
    </head>
    <body class="bg-slate-200">
        <!-- COLUMN 1 -->
        <div class="flex flex-row justify-between">
            <div class="basis-1/3 bg-white shadow-md rounded px-8 pt-6 pb-8 m-4">
                <p class="bg-pink-100 rounded p-2 mb-2 font-bold">String -> ToC</p>
                <div class="mb-4">
                    <label for="startToC" class="block text-gray-700 text-sm font-semibold mb-2">String to convert:</label>
                    <input type="text" id="startToC" name="startToC" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                    <button type="button" onclick="fixToC()" class="mt-2 bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline">Generate ToC</button>
                </div>
                
            </div>
            <div class="basis-1/3 bg-white shadow-md rounded px-8 pt-6 pb-8 m-4">
                <p class="bg-pink-100 rounded p-2 mb-2 font-bold">String -> Slug</p>
                <div class="mb-4">
                    <label for="startSlug" class="block text-gray-700 text-sm font-semibold mb-2">String to convert:</label>
                    <input type="text" id="startSlug" name="startSlug" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                    <button type="button" onclick="fixSlug()" class="mt-2 bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline">Generate Slug</button>
                </div>
            </div>
            <div class="basis-1/3 bg-white shadow-md rounded px-8 pt-6 pb-8 m-4">
                <p class="bg-pink-100 rounded p-2 mb-2 font-bold">String -> LowerCase</p>
                <div class="mb-4">
                    <label for="start" class="block text-gray-700 text-sm font-semibold mb-2">String to convert:</label>
                    <input type="text" id="start" name="start" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" disabled>
                    <button type="button" onclick="" class="mt-2 bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline" disabled>Generate LowerCase</button>
                </div>
            </div>
        </div>

        <!-- COLUMN 2 -->
        <div class="flex flex-row justify-between">
            <div class="basis-1/3 bg-white shadow-md rounded px-8 pt-6 pb-8 m-4">
                <p class="bg-pink-100 rounded p-2 mb-2 font-bold">String -> noNumbers</p>
                <div class="mb-4">
                    <label for="start" class="block text-gray-700 text-sm font-semibold mb-2">String to convert:</label>
                    <input type="text" id="start" name="start" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" disabled>
                    <button type="button" onclick="" class="mt-2 bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline" disabled>Generate LowerCaps</button>
                </div>
            </div>
            <!-- RESULTS-->
            <div class="basis-1/3 bg-white border-4 border-purple-800 rounded rounded-xl p-6 m-4">
                <p class="bg-purple-400 rounded p-2 mb-2 font-bold">RESULTS -> COPY FROM HERE</p>
                <div class="mb-4">
                    <p>Work in progress:</p>
                    <p class="font-bold text-green-500">
                    <svg class="inline w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"></path></svg>String -> ToC works in main (this) field.</p>
                    <p class="font-bold text-green-500">
                        <svg class="inline w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"></path></svg>String -> Slug works in main (this) field.</p>                    <p class="font-bold text-red-500"><svg class="inline w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"></path></svg>String -> LowerCase doesn't work yet.</p>
                    <p class="font-bold text-red-500"><svg class="inline w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"></path></svg>String -> noNumbers doesn't work yet.</p>
                    <p class="font-bold text-red-500"><svg class="inline w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"></path></svg>String -> UpperCase doesn't work yet.</p>
                    <div id="result-wrap" style="display:none;">
                        <p id="result"></p>
                        <button onclick="copy()" class="mt-2 bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline">Copy</button>
                        <button onclick="addHash()" class="mt-2 bg-orange-500 hover:bg-orange-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline">Add #</button>
                    </div>
                </div>
            </div>
            <!-- /RESULTS-->
            <div class="basis-1/3 bg-white shadow-md rounded px-8 pt-6 pb-8 m-4">
                <p class="bg-pink-100 rounded p-2 mb-2 font-bold">String -> UpperCase</p>
                <div class="mb-4">
                    <label for="start" class="block text-gray-700 text-sm font-semibold mb-2">String to convert:</label>
                    <input type="text" id="start" name="start" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" disabled>
                    <button type="button" onclick="" class="mt-2 bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline" disabled>Generate UppperCase</button>
                </div>
            </div>
        </div>
        
        <script> 
            // global fields
            var results = document.getElementById("result-wrap");


            // FOR ToC conversion - string-> ToC
            // not ideal but works for most of cases
            function replaceAllExceptFirst(str, search, replace) {
                return str.split(search).reduce((prev, curr, i) => prev + (i == 1 ? search : replace) + curr);
            }

            // string -> slug
            function convertToSlug(str) {
                return str.toLowerCase().replace(/ /g, '-').replace(/[^\w-]+/g, '');
            }

            const fixSlug = () =>{
                let str = document.getElementById("startSlug").value; 

                results.style.display = "none";
                convertToSlug(str);

                // show copy button after results if str is not empty
                if(results.style.display === "none" && str) {
                    results.style.display = "block";    
                }                 

                document.getElementById("result").innerHTML = str;
            }

            const fixToC = () =>{
                let str = document.getElementById("startToC").value; 

                results.style.display = "none";

                // check if # is in str (don't look first char) and delete it
                str = replaceAllExceptFirst(str, '#', '');

                // check if length>50 and abort
                if(str.length > 50) return false;

                str = str.trim();
                str = str.replace("'", "");
                str = str.replace(/\s+/g, '-');

                // delete leftover - at the end if we had to delete '
                if(str.charAt(str.length-1) == '-') {
                    str = str.slice(0, -1);
                }

                // show copy button after results if str is not empty
                if(results.style.display === "none" && str) {
                    results.style.display = "block";    
                }                 

                document.getElementById("result").innerHTML = str;
            }

            // add # at the beginning
            const addHash = () =>{
                var toHash = document.getElementById("result").innerHTML;

                // add only if # isn't first char
                if(toHash.charAt(0) != '#') {
                    toHash = "#" + toHash;
                }

                document.getElementById("result").innerHTML = toHash;
            }

            // copy to the clipboard
            const copy = () =>{
                const cb = navigator.clipboard;
                const paragraph = document.querySelector('#result');
                cb.writeText(paragraph.innerText);
            }

            
        </script>
    </body>
</html>